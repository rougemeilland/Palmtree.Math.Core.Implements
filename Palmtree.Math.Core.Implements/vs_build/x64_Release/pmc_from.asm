; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27026.1 

include listing.inc

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	From_I_Imp
PUBLIC	From_L_Imp
PUBLIC	Initialize_From
PUBLIC	PMC_From_I
PUBLIC	PMC_From_L
EXTRN	AllocateNumber:PROC
EXTRN	CommitNumber:PROC
EXTRN	number_zero:BYTE
;	COMDAT pdata
pdata	SEGMENT
$pdata$From_I_Imp DD imagerel $LN8
	DD	imagerel $LN8+93
	DD	imagerel $unwind$From_I_Imp
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$From_L_Imp DD imagerel $LN24
	DD	imagerel $LN24+78
	DD	imagerel $unwind$From_L_Imp
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$PMC_From_I DD imagerel $LN14
	DD	imagerel $LN14+122
	DD	imagerel $unwind$PMC_From_I
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$PMC_From_L DD imagerel $LN30
	DD	imagerel $LN30+111
	DD	imagerel $unwind$PMC_From_L
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$PMC_From_L DD 040a01H
	DD	07340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$PMC_From_I DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$From_L_Imp DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$From_I_Imp DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _LZCNT_ALT_UNIT
_TEXT	SEGMENT
x$ = 8
_LZCNT_ALT_UNIT PROC					; COMDAT

; 890  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN2@LZCNT_ALT_

; 891  :         return (sizeof(x) * 8);

	mov	eax, 64					; 00000040H

; 915  : }

	ret	0
$LN2@LZCNT_ALT_:

; 892  : #ifdef _M_IX86
; 893  :     _UINT32_T pos;
; 894  : #ifdef _MSC_VER
; 895  :     _BitScanReverse(&pos, x);
; 896  : #elif defined(__GNUC__)
; 897  :     __asm__("bsrl %1, %0" : "=r"(pos) : "rm"(x));
; 898  : #else
; 899  : #error unknown compiler
; 900  : #endif
; 901  : #elif defined(_M_X64)
; 902  : #ifdef _MSC_VER
; 903  :     _UINT32_T pos;
; 904  :     _BitScanReverse64(&pos, x);

	bsr	rcx, rcx

; 905  : #elif defined(__GNUC__)
; 906  :     _UINT64_T pos;
; 907  :     __asm__("bsrq %1, %0" : "=r"(pos) : "rm"(x));
; 908  : #else
; 909  : #error unknown compiler
; 910  : #endif
; 911  : #else
; 912  : #error unknown platform
; 913  : #endif
; 914  :     return (sizeof(x) * 8 - 1 - pos);

	mov	eax, 63					; 0000003fH
	sub	rax, rcx

; 915  : }

	ret	0
_LZCNT_ALT_UNIT ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _LZCNT_ALT_32
_TEXT	SEGMENT
x$ = 8
_LZCNT_ALT_32 PROC					; COMDAT

; 857  :     if (x == 0)

	test	ecx, ecx
	jne	SHORT $LN2@LZCNT_ALT_

; 858  :         return (sizeof(x) * 8);

	mov	eax, 32					; 00000020H

; 868  : }

	ret	0
$LN2@LZCNT_ALT_:

; 859  :     _UINT32_T pos;
; 860  : #ifdef _MSC_VER
; 861  :     _BitScanReverse(&pos, x);

	bsr	ecx, ecx

; 862  : #elif defined(__GNUC__)
; 863  :     __asm__( "bsrl %1, %0" : "=r"(pos) : "rm"(x) );
; 864  : #else
; 865  : #error unknown compiler
; 866  : #endif
; 867  :     return (sizeof(x) * 8 - 1 - pos);

	mov	eax, 31
	sub	eax, ecx

; 868  : }

	ret	0
_LZCNT_ALT_32 ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _FROMDWORDTOWORD
_TEXT	SEGMENT
value$ = 8
result_high$ = 16
_FROMDWORDTOWORD PROC					; COMDAT

; 443  :     *result_high = (_UINT32_T)(value >> 32);

	mov	rax, rcx
	shr	rax, 32					; 00000020H
	mov	DWORD PTR [rdx], eax

; 444  :     return ((_UINT32_T)value);

	mov	eax, ecx

; 445  : }

	ret	0
_FROMDWORDTOWORD ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT PMC_From_L
_TEXT	SEGMENT
p$ = 48
x$ = 48
o$ = 56
PMC_From_L PROC						; COMDAT

; 111  : {

$LN30:
	mov	QWORD PTR [rsp+16], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rdi, rdx
	mov	rbx, rcx

; 112  :     NUMBER_HEADER* p;
; 113  :     PMC_STATUS_CODE result;
; 114  :     if (sizeof(__UNIT_TYPE) * 2 < sizeof(x))
; 115  :     {
; 116  :         // 32bit–¢–ž‚ÌCPU‚É‚Í–¢‘Î‰ž
; 117  :         return (PMC_STATUS_INTERNAL_ERROR);
; 118  :     }
; 119  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN3@PMC_From_L

; 120  :         *o = &number_zero;

	lea	rax, OFFSET FLAT:number_zero
	mov	QWORD PTR [rdx], rax

; 126  :     }
; 127  : #ifdef _DEBUG
; 128  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 129  :         return (result);
; 130  : #endif
; 131  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 132  : }

	mov	rbx, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN3@PMC_From_L:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 904  :     _BitScanReverse64(&pos, x);

	bsr	rdx, rbx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 81   :         if ((result = AllocateNumber(o, x_bit_length, NULL)) != PMC_STATUS_OK)

	xor	r8d, r8d
	lea	rcx, QWORD PTR p$[rsp]
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 914  :     return (sizeof(x) * 8 - 1 - pos);

	inc	rdx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 81   :         if ((result = AllocateNumber(o, x_bit_length, NULL)) != PMC_STATUS_OK)

	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN7@PMC_From_L

; 82   :             return (result);
; 83   :         (*o)->BLOCK[0] = (__UNIT_TYPE)x;

	mov	rax, QWORD PTR p$[rsp]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 84   :     }
; 85   :     CommitNumber(*o);

	mov	rcx, QWORD PTR p$[rsp]
	call	CommitNumber

; 121  :     else
; 122  :     {
; 123  :         if ((result = From_L_Imp(x, &p)) != PMC_STATUS_OK)
; 124  :             return (result);
; 125  :         *o = p;

	mov	rax, QWORD PTR p$[rsp]
	mov	QWORD PTR [rdi], rax

; 126  :     }
; 127  : #ifdef _DEBUG
; 128  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 129  :         return (result);
; 130  : #endif
; 131  :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN7@PMC_From_L:

; 132  : }

	mov	rbx, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
PMC_From_L ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT PMC_From_I
_TEXT	SEGMENT
x$ = 48
o$ = 56
p$1 = 64
PMC_From_I PROC						; COMDAT

; 90   : {

$LN14:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	ebx, ecx
	mov	rdi, rdx

; 91   :     PMC_STATUS_CODE result;
; 92   :     if (sizeof(__UNIT_TYPE) < sizeof(x))
; 93   :         return (PMC_STATUS_INTERNAL_ERROR);
; 94   :     if (x == 0)

	test	ecx, ecx
	jne	SHORT $LN3@PMC_From_I

; 95   :         *o = &number_zero;

	lea	rax, OFFSET FLAT:number_zero
	mov	QWORD PTR [rdx], rax

; 102  :     }
; 103  : #ifdef _DEBUG
; 104  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 105  :         return (result);
; 106  : #endif
; 107  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 108  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN3@PMC_From_I:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 861  :     _BitScanReverse(&pos, x);

	bsr	eax, ebx

; 867  :     return (sizeof(x) * 8 - 1 - pos);

	mov	ecx, 31
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	mov	edx, 32					; 00000020H
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 867  :     return (sizeof(x) * 8 - 1 - pos);

	sub	ecx, eax
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	xor	r8d, r8d
	mov	eax, ecx
	lea	rcx, QWORD PTR p$1[rsp]
	sub	rdx, rax
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN7@PMC_From_I

; 41   :         return (result);
; 42   :     (*o)->BLOCK[0] = x;

	mov	rax, QWORD PTR p$1[rsp]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 43   :     CommitNumber(*o);

	mov	rcx, QWORD PTR p$1[rsp]
	call	CommitNumber

; 96   :     else
; 97   :     {
; 98   :         NUMBER_HEADER* p;
; 99   :         if ((result = From_I_Imp(x, &p)) != PMC_STATUS_OK)
; 100  :             return (result);
; 101  :         *o = p;

	mov	rax, QWORD PTR p$1[rsp]
	mov	QWORD PTR [rdi], rax

; 102  :     }
; 103  : #ifdef _DEBUG
; 104  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 105  :         return (result);
; 106  : #endif
; 107  :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN7@PMC_From_I:

; 108  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
PMC_From_I ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT Initialize_From
_TEXT	SEGMENT
feature$ = 8
Initialize_From PROC					; COMDAT

; 136  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 137  : }

	ret	0
Initialize_From ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT From_L_Imp
_TEXT	SEGMENT
x$ = 48
o$ = 56
From_L_Imp PROC						; COMDAT

; 48   : {

$LN24:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rdi, rdx
	mov	rbx, rcx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 890  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN21@From_L_Imp

; 891  :         return (sizeof(x) * 8);

	xor	edx, edx
	jmp	SHORT $LN20@From_L_Imp
$LN21@From_L_Imp:

; 892  : #ifdef _M_IX86
; 893  :     _UINT32_T pos;
; 894  : #ifdef _MSC_VER
; 895  :     _BitScanReverse(&pos, x);
; 896  : #elif defined(__GNUC__)
; 897  :     __asm__("bsrl %1, %0" : "=r"(pos) : "rm"(x));
; 898  : #else
; 899  : #error unknown compiler
; 900  : #endif
; 901  : #elif defined(_M_X64)
; 902  : #ifdef _MSC_VER
; 903  :     _UINT32_T pos;
; 904  :     _BitScanReverse64(&pos, x);

	bsr	rdx, rbx

; 905  : #elif defined(__GNUC__)
; 906  :     _UINT64_T pos;
; 907  :     __asm__("bsrq %1, %0" : "=r"(pos) : "rm"(x));
; 908  : #else
; 909  : #error unknown compiler
; 910  : #endif
; 911  : #else
; 912  : #error unknown platform
; 913  : #endif
; 914  :     return (sizeof(x) * 8 - 1 - pos);

	inc	rdx
$LN20@From_L_Imp:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 81   :         if ((result = AllocateNumber(o, x_bit_length, NULL)) != PMC_STATUS_OK)

	xor	r8d, r8d
	mov	rcx, rdi
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN1@From_L_Imp

; 82   :             return (result);
; 83   :         (*o)->BLOCK[0] = (__UNIT_TYPE)x;

	mov	rax, QWORD PTR [rdi]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 84   :     }
; 85   :     CommitNumber(*o);

	mov	rcx, QWORD PTR [rdi]
	call	CommitNumber

; 86   :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN1@From_L_Imp:

; 87   : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
From_L_Imp ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT From_I_Imp
_TEXT	SEGMENT
x$ = 48
o$ = 56
From_I_Imp PROC						; COMDAT

; 38   : {

$LN8:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	ebx, ecx
	mov	rdi, rdx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 857  :     if (x == 0)

	mov	edx, 32					; 00000020H
	test	ecx, ecx
	jne	SHORT $LN5@From_I_Imp

; 858  :         return (sizeof(x) * 8);

	mov	r8d, edx
	jmp	SHORT $LN4@From_I_Imp
$LN5@From_I_Imp:

; 859  :     _UINT32_T pos;
; 860  : #ifdef _MSC_VER
; 861  :     _BitScanReverse(&pos, x);

	bsr	eax, ebx

; 862  : #elif defined(__GNUC__)
; 863  :     __asm__( "bsrl %1, %0" : "=r"(pos) : "rm"(x) );
; 864  : #else
; 865  : #error unknown compiler
; 866  : #endif
; 867  :     return (sizeof(x) * 8 - 1 - pos);

	mov	r8d, 31
	sub	r8d, eax
$LN4@From_I_Imp:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	mov	eax, r8d
	mov	rcx, rdi
	sub	rdx, rax
	xor	r8d, r8d
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN1@From_I_Imp

; 41   :         return (result);
; 42   :     (*o)->BLOCK[0] = x;

	mov	rax, QWORD PTR [rdi]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 43   :     CommitNumber(*o);

	mov	rcx, QWORD PTR [rdi]
	call	CommitNumber

; 44   :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN1@From_I_Imp:

; 45   : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
From_I_Imp ENDP
_TEXT	ENDS
END
