; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27026.1 

include listing.inc

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	From_I_Imp
PUBLIC	From_L_Imp
PUBLIC	Initialize_From
PUBLIC	PMC_From_I
PUBLIC	PMC_From_L
EXTRN	AllocateNumber:PROC
EXTRN	CommitNumber:PROC
EXTRN	number_zero:BYTE
;	COMDAT pdata
pdata	SEGMENT
$pdata$From_I_Imp DD imagerel $LN8
	DD	imagerel $LN8+93
	DD	imagerel $unwind$From_I_Imp
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$From_L_Imp DD imagerel $LN24
	DD	imagerel $LN24+96
	DD	imagerel $unwind$From_L_Imp
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$PMC_From_I DD imagerel $LN14
	DD	imagerel $LN14+123
	DD	imagerel $unwind$PMC_From_I
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$PMC_From_L DD imagerel $LN30
	DD	imagerel $LN30+126
	DD	imagerel $unwind$PMC_From_L
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$PMC_From_L DD 040a01H
	DD	07340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$PMC_From_I DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$From_L_Imp DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$From_I_Imp DD 040a01H
	DD	06340aH
	DD	07006320aH
xdata	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _LZCNT_ALT_UNIT
_TEXT	SEGMENT
x$ = 8
_LZCNT_ALT_UNIT PROC					; COMDAT

; 906  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN2@LZCNT_ALT_

; 907  :         return (sizeof(x) * 8);

	mov	eax, 64					; 00000040H

; 931  : }

	ret	0
$LN2@LZCNT_ALT_:

; 908  : #ifdef _M_IX86
; 909  :     _UINT32_T pos;
; 910  : #ifdef _MSC_VER
; 911  :     _BitScanReverse(&pos, x);
; 912  : #elif defined(__GNUC__)
; 913  :     __asm__("bsrl %1, %0" : "=r"(pos) : "rm"(x));
; 914  : #else
; 915  : #error unknown compiler
; 916  : #endif
; 917  : #elif defined(_M_X64)
; 918  : #ifdef _MSC_VER
; 919  :     _UINT32_T pos;
; 920  :     _BitScanReverse64(&pos, x);

	bsr	rcx, rcx

; 921  : #elif defined(__GNUC__)
; 922  :     _UINT64_T pos;
; 923  :     __asm__("bsrq %1, %0" : "=r"(pos) : "rm"(x));
; 924  : #else
; 925  : #error unknown compiler
; 926  : #endif
; 927  : #else
; 928  : #error unknown platform
; 929  : #endif
; 930  :     return (sizeof(x) * 8 - 1 - pos);

	mov	eax, 63					; 0000003fH
	sub	eax, ecx

; 931  : }

	ret	0
_LZCNT_ALT_UNIT ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _LZCNT_ALT_32
_TEXT	SEGMENT
x$ = 8
_LZCNT_ALT_32 PROC					; COMDAT

; 873  :     if (x == 0)

	test	ecx, ecx
	jne	SHORT $LN2@LZCNT_ALT_

; 874  :         return (sizeof(x) * 8);

	mov	eax, 32					; 00000020H

; 884  : }

	ret	0
$LN2@LZCNT_ALT_:

; 875  :     _UINT32_T pos;
; 876  : #ifdef _MSC_VER
; 877  :     _BitScanReverse(&pos, x);

	bsr	ecx, ecx

; 878  : #elif defined(__GNUC__)
; 879  :     __asm__( "bsrl %1, %0" : "=r"(pos) : "rm"(x) );
; 880  : #else
; 881  : #error unknown compiler
; 882  : #endif
; 883  :     return (sizeof(x) * 8 - 1 - pos);

	mov	eax, 31
	sub	eax, ecx

; 884  : }

	ret	0
_LZCNT_ALT_32 ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
;	COMDAT _FROMDWORDTOWORD
_TEXT	SEGMENT
value$ = 8
result_high$ = 16
_FROMDWORDTOWORD PROC					; COMDAT

; 459  :     *result_high = (_UINT32_T)(value >> 32);

	mov	rax, rcx
	shr	rax, 32					; 00000020H
	mov	DWORD PTR [rdx], eax

; 460  :     return ((_UINT32_T)value);

	mov	eax, ecx

; 461  : }

	ret	0
_FROMDWORDTOWORD ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT PMC_From_L
_TEXT	SEGMENT
p$ = 48
x$ = 48
o$ = 56
PMC_From_L PROC						; COMDAT

; 111  : {

$LN30:
	mov	QWORD PTR [rsp+16], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rdi, rdx
	mov	rbx, rcx

; 112  :     NUMBER_HEADER* p;
; 113  :     PMC_STATUS_CODE result;
; 114  :     if (sizeof(__UNIT_TYPE) * 2 < sizeof(x))
; 115  :     {
; 116  :         // 32bit–¢–ž‚ÌCPU‚É‚Í–¢‘Î‰ž
; 117  :         return (PMC_STATUS_INTERNAL_ERROR);
; 118  :     }
; 119  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN3@PMC_From_L

; 120  :         *o = &number_zero;

	lea	rax, OFFSET FLAT:number_zero
	mov	QWORD PTR [rdx], rax

; 126  :     }
; 127  : #ifdef _DEBUG
; 128  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 129  :         return (result);
; 130  : #endif
; 131  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 132  : }

	mov	rbx, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN3@PMC_From_L:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 920  :     _BitScanReverse64(&pos, x);

	bsr	rax, rbx

; 930  :     return (sizeof(x) * 8 - 1 - pos);

	mov	ecx, 63					; 0000003fH
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 80   :         __UNIT_TYPE x_bit_length = sizeof(x) * 8 - _LZCNT_ALT_UNIT((__UNIT_TYPE)x);

	mov	edx, 64					; 00000040H
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 930  :     return (sizeof(x) * 8 - 1 - pos);

	sub	ecx, eax
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 81   :         if ((result = AllocateNumber(o, x_bit_length, NULL)) != PMC_STATUS_OK)

	xor	r8d, r8d
	movsxd	rax, ecx
	lea	rcx, QWORD PTR p$[rsp]
	sub	rdx, rax
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN7@PMC_From_L

; 82   :             return (result);
; 83   :         (*o)->BLOCK[0] = (__UNIT_TYPE)x;

	mov	rax, QWORD PTR p$[rsp]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 84   :     }
; 85   :     CommitNumber(*o);

	mov	rcx, QWORD PTR p$[rsp]
	call	CommitNumber

; 121  :     else
; 122  :     {
; 123  :         if ((result = From_L_Imp(x, &p)) != PMC_STATUS_OK)
; 124  :             return (result);
; 125  :         *o = p;

	mov	rax, QWORD PTR p$[rsp]
	mov	QWORD PTR [rdi], rax

; 126  :     }
; 127  : #ifdef _DEBUG
; 128  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 129  :         return (result);
; 130  : #endif
; 131  :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN7@PMC_From_L:

; 132  : }

	mov	rbx, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
PMC_From_L ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT PMC_From_I
_TEXT	SEGMENT
x$ = 48
o$ = 56
p$1 = 64
PMC_From_I PROC						; COMDAT

; 90   : {

$LN14:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	ebx, ecx
	mov	rdi, rdx

; 91   :     PMC_STATUS_CODE result;
; 92   :     if (sizeof(__UNIT_TYPE) < sizeof(x))
; 93   :         return (PMC_STATUS_INTERNAL_ERROR);
; 94   :     if (x == 0)

	test	ecx, ecx
	jne	SHORT $LN3@PMC_From_I

; 95   :         *o = &number_zero;

	lea	rax, OFFSET FLAT:number_zero
	mov	QWORD PTR [rdx], rax

; 102  :     }
; 103  : #ifdef _DEBUG
; 104  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 105  :         return (result);
; 106  : #endif
; 107  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 108  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN3@PMC_From_I:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 877  :     _BitScanReverse(&pos, x);

	bsr	eax, ebx

; 883  :     return (sizeof(x) * 8 - 1 - pos);

	mov	ecx, 31
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	mov	edx, 32					; 00000020H
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 883  :     return (sizeof(x) * 8 - 1 - pos);

	sub	ecx, eax
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	xor	r8d, r8d
	movsxd	rax, ecx
	lea	rcx, QWORD PTR p$1[rsp]
	sub	rdx, rax
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN7@PMC_From_I

; 41   :         return (result);
; 42   :     (*o)->BLOCK[0] = x;

	mov	rax, QWORD PTR p$1[rsp]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 43   :     CommitNumber(*o);

	mov	rcx, QWORD PTR p$1[rsp]
	call	CommitNumber

; 96   :     else
; 97   :     {
; 98   :         NUMBER_HEADER* p;
; 99   :         if ((result = From_I_Imp(x, &p)) != PMC_STATUS_OK)
; 100  :             return (result);
; 101  :         *o = p;

	mov	rax, QWORD PTR p$1[rsp]
	mov	QWORD PTR [rdi], rax

; 102  :     }
; 103  : #ifdef _DEBUG
; 104  :     if ((result = CheckNumber(*o)) != PMC_STATUS_OK)
; 105  :         return (result);
; 106  : #endif
; 107  :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN7@PMC_From_I:

; 108  : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
PMC_From_I ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT Initialize_From
_TEXT	SEGMENT
feature$ = 8
Initialize_From PROC					; COMDAT

; 136  :     return (PMC_STATUS_OK);

	xor	eax, eax

; 137  : }

	ret	0
Initialize_From ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT From_L_Imp
_TEXT	SEGMENT
x$ = 48
o$ = 56
From_L_Imp PROC						; COMDAT

; 48   : {

$LN24:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rdi, rdx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 906  :     if (x == 0)

	mov	edx, 64					; 00000040H
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 48   : {

	mov	rbx, rcx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 906  :     if (x == 0)

	test	rcx, rcx
	jne	SHORT $LN21@From_L_Imp

; 907  :         return (sizeof(x) * 8);

	mov	r8d, edx
	jmp	SHORT $LN20@From_L_Imp
$LN21@From_L_Imp:

; 908  : #ifdef _M_IX86
; 909  :     _UINT32_T pos;
; 910  : #ifdef _MSC_VER
; 911  :     _BitScanReverse(&pos, x);
; 912  : #elif defined(__GNUC__)
; 913  :     __asm__("bsrl %1, %0" : "=r"(pos) : "rm"(x));
; 914  : #else
; 915  : #error unknown compiler
; 916  : #endif
; 917  : #elif defined(_M_X64)
; 918  : #ifdef _MSC_VER
; 919  :     _UINT32_T pos;
; 920  :     _BitScanReverse64(&pos, x);

	bsr	rax, rbx

; 921  : #elif defined(__GNUC__)
; 922  :     _UINT64_T pos;
; 923  :     __asm__("bsrq %1, %0" : "=r"(pos) : "rm"(x));
; 924  : #else
; 925  : #error unknown compiler
; 926  : #endif
; 927  : #else
; 928  : #error unknown platform
; 929  : #endif
; 930  :     return (sizeof(x) * 8 - 1 - pos);

	mov	r8d, 63					; 0000003fH
	sub	r8d, eax
$LN20@From_L_Imp:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 80   :         __UNIT_TYPE x_bit_length = sizeof(x) * 8 - _LZCNT_ALT_UNIT((__UNIT_TYPE)x);

	movsxd	rax, r8d

; 81   :         if ((result = AllocateNumber(o, x_bit_length, NULL)) != PMC_STATUS_OK)

	mov	rcx, rdi
	sub	rdx, rax
	xor	r8d, r8d
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN1@From_L_Imp

; 82   :             return (result);
; 83   :         (*o)->BLOCK[0] = (__UNIT_TYPE)x;

	mov	rax, QWORD PTR [rdi]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 84   :     }
; 85   :     CommitNumber(*o);

	mov	rcx, QWORD PTR [rdi]
	call	CommitNumber

; 86   :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN1@From_L_Imp:

; 87   : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
From_L_Imp ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c
;	COMDAT From_I_Imp
_TEXT	SEGMENT
x$ = 48
o$ = 56
From_I_Imp PROC						; COMDAT

; 38   : {

$LN8:
	mov	QWORD PTR [rsp+8], rbx
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	ebx, ecx
	mov	rdi, rdx
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_internal.h

; 873  :     if (x == 0)

	mov	edx, 32					; 00000020H
	test	ecx, ecx
	jne	SHORT $LN5@From_I_Imp

; 874  :         return (sizeof(x) * 8);

	mov	r8d, edx
	jmp	SHORT $LN4@From_I_Imp
$LN5@From_I_Imp:

; 875  :     _UINT32_T pos;
; 876  : #ifdef _MSC_VER
; 877  :     _BitScanReverse(&pos, x);

	bsr	eax, ebx

; 878  : #elif defined(__GNUC__)
; 879  :     __asm__( "bsrl %1, %0" : "=r"(pos) : "rm"(x) );
; 880  : #else
; 881  : #error unknown compiler
; 882  : #endif
; 883  :     return (sizeof(x) * 8 - 1 - pos);

	mov	r8d, 31
	sub	r8d, eax
$LN4@From_I_Imp:
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.implements\palmtree.math.core.implements\pmc_from.c

; 40   :     if ((result = AllocateNumber(o, sizeof(x) * 8 - _LZCNT_ALT_32(x), NULL)) != PMC_STATUS_OK)

	movsxd	rax, r8d
	mov	rcx, rdi
	sub	rdx, rax
	xor	r8d, r8d
	call	AllocateNumber
	test	eax, eax
	jne	SHORT $LN1@From_I_Imp

; 41   :         return (result);
; 42   :     (*o)->BLOCK[0] = x;

	mov	rax, QWORD PTR [rdi]
	mov	rcx, QWORD PTR [rax+48]
	mov	QWORD PTR [rcx], rbx

; 43   :     CommitNumber(*o);

	mov	rcx, QWORD PTR [rdi]
	call	CommitNumber

; 44   :     return (PMC_STATUS_OK);

	xor	eax, eax
$LN1@From_I_Imp:

; 45   : }

	mov	rbx, QWORD PTR [rsp+48]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
From_I_Imp ENDP
_TEXT	ENDS
END
